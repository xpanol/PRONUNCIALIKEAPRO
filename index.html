<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PRO!NUNCIA LIKE A PRO!</title>
<link href="https://fonts.googleapis.com/css?family=Special+Elite&display=swap" rel="stylesheet" />
<style>
:root {
    --bg-english: #111;
    --text-english: white;
    --accent-english: #F8AC10;
    --bg-spanish: #F8AC10;
    --text-spanish: black;
    --accent-spanish: #D9171A;
}

body {
    font-family: 'Special Elite', monospace;
    background-color: var(--bg-english);
    color: var(--text-english);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
    transition: background-color 0.5s ease, color 0.5s ease;
    overflow-x: hidden;
}

body.english { background-color: var(--bg-english); color: var(--text-english); }
body.spanish { background-color: var(--bg-spanish); color: var(--text-spanish); }

h1 {
    margin: 10px 0 30px 0;
    font-size: clamp(2rem, 5vw, 2.8em);
    line-height: 1.1;
    color: inherit;
}
h1 span { display: block; font-size: 0.9em; margin-top: 5px; opacity: 0.9; }

.language-switcher { margin-bottom: 30px; position: relative; z-index: 100; display: flex; justify-content: center; gap: 10px; }
.lang-group { position: relative; }

.main-lang-btn {
    background-color: black;
    color: white;
    border: none;
    padding: 10px 15px;
    font-size: 1.1em;
    cursor: pointer;
    font-family: 'Special Elite', monospace;
    border-radius: 8px;
    box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    transition: all 0.2s ease;
    height: 55px;
    min-width: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.main-lang-btn:active { transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.2); }

#englishSectionButton.active, #englishSectionButton:hover { background-color: white; color: black; }
#spanishSectionButton { background-color: var(--accent-english); color: black; }
#spanishSectionButton.active, #spanishSectionButton:hover { background-color: var(--accent-spanish); color: white; }

.dialect-menu {
    display: none;
    position: absolute;
    top: 110%;
    left: 0;
    width: 100%;
    background-color: white;
    border: 2px solid black;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    flex-direction: column;
    z-index: 101;
}
.dialect-menu.show { display: flex; animation: fadeIn 0.2s ease; }

.dialect-menu button {
    width: 100%;
    font-family: inherit;
    font-size: 1em;
    border: none;
    border-bottom: 1px solid #eee;
    padding: 12px;
    cursor: pointer;
    background-color: white;
    color: black;
    transition: background 0.2s;
}
.dialect-menu button:hover { background-color: #f0f0f0; font-weight: bold; }

.flashcard {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
    margin-bottom: 30px;
    width: 100%;
}

#currentWord {
    font-size: clamp(3.5rem, 15vw, 10em);
    margin: 0 0 10px 0;
    line-height: 1.1;
    word-break: break-word;
}

#phoneticTranscription {
    font-size: clamp(3rem, 10vw, 7em);
    font-family: 'Courier New', monospace;
    line-height: 1;
    min-height: 1.2em;
    font-weight: bold;
    text-shadow: none;
}

#contextInfo {
    font-size: 1.2em;
    opacity: 0.8;
    background: rgba(0,0,0,0.1);
    padding: 5px 15px;
    border-radius: 20px;
}

.button-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 400px;
}

.navigation-row {
    display: flex;
    justify-content: space-between;
    width: 100%;
    gap: 15px;
}

.control-btn {
    font-size: 1.2em;
    font-family: 'Special Elite', monospace;
    cursor: pointer;
    transition: all 0.2s ease;
    border-radius: 8px;
    border: none;
    box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.control-btn:active { transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.2); }

#playAudioButton {
    width: 100%;
    font-size: 1.4em;
    background-color: var(--accent-spanish);
    color: white;
    margin-bottom: 15px;
    border: none;
}
#playAudioButton:hover { background-color: white; color: black; }

.nav-btn { width: 48%; }
body.english .nav-btn { background-color: var(--accent-english); color: black; }
body.english .nav-btn:hover { background-color: white; }
body.spanish .nav-btn { background-color: black; color: white; }
body.spanish .nav-btn:hover { background-color: white; color: black; }

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 600px) {
    .language-switcher { flex-direction: row; flex-wrap: wrap; }
    .main-lang-btn { font-size: 1em; height: 50px; min-width: 120px; }
    .control-btn { height: 50px; font-size: 1em; }
}

@media (orientation: landscape) {
    #currentWord { font-size: clamp(1.75rem, 7.5vw, 5em); }
    #phoneticTranscription { font-size: clamp(1.5rem, 5vw, 3.5em); }
}

.spacer { height: 10px; visibility: hidden; }
</style>
</head>
<body class="english">

<h1>PRO!NUNCIA<br><span>LIKE A PRO!</span></h1>

<div class="language-switcher">
    <div class="lang-group">
        <button id="englishSectionButton" class="main-lang-btn active">English ðŸ‡ºðŸ‡¸ðŸ‡¬ðŸ‡§</button>
        <div id="englishMenu" class="dialect-menu">
            <button data-dialect="1">ðŸ‡ºðŸ‡¸ Gen. Am.</button>
            <button data-dialect="2">ðŸ‡¬ðŸ‡§ UK-RP</button>
        </div>
    </div>

    <div class="lang-group">
        <button id="spanishSectionButton" class="main-lang-btn">EspaÃ±ol ðŸ‡ªðŸ‡¸ðŸ‡²ðŸ‡½</button>
        <div id="spanishMenu" class="dialect-menu">
            <button data-dialect="1">ðŸ‡ªðŸ‡¸ Castilian</button>
            <button data-dialect="2">ðŸ‡²ðŸ‡½ Lat. Am.</button>
        </div>
    </div>
</div>

<div class="flashcard">
    <div id="currentWord">Loading...</div>
    <div id="phoneticTranscription"></div>
    <div id="contextInfo"></div>
</div>

<div class="button-group">
    <button id="playAudioButton" class="control-btn" title="Press Spacebar">PLAY AUDIO ðŸŽ§</button>
    <div class="navigation-row">
        <button id="prevButton" class="control-btn nav-btn" title="Left Arrow">- Previous</button>
        <button id="nextButton" class="control-btn nav-btn" title="Right Arrow">Next -</button>
    </div>
</div>

<div class="spacer"></div>

<script>
// Tablica z najczystszymi sÅ‚owami, aby wykluczyÄ‡ bÅ‚Ä…d formatowania
const ALL_WORDS_DATA = [
    { word:"budget", lang:"EN", ipa:"ËˆbÊŒdÊ’Éªt", ipa2:"ËˆbÊŒdÊ’Éªt" },
    { word:"client", lang:"EN", ipa:"ËˆklaÉªÉ™nt", ipa2:"ËˆklaÉªÉ™nt" },
    { word:"strategy", lang:"EN", ipa:"ËˆstrÃ¦tÉ™dÊ’i", ipa2:"ËˆstrÃ¦tÉ™dÊ’i" },
    { word:"report", lang:"EN", ipa:"rÉªËˆpÉ”Ërt", ipa2:"rÉªËˆpÉ”Ët" },
    { word:"engagement", lang:"EN", ipa:"ÉªnËˆÉ¡eÉªdÊ’mÉ™nt", ipa2:"ÉªnËˆÉ¡eÉªdÊ’mÉ™nt" },
    { word:"quarter", lang:"EN", ipa:"ËˆkwÉ”ËrtÉ™r", ipa2:"ËˆkwÉ”ËtÉ™" },
    { word:"schedule", lang:"EN", ipa:"ËˆskedÊ’uËl", ipa2:"ËˆÊƒedjuËl" },
    { word:"objective", lang:"EN", ipa:"É™bËˆdÊ’ektÉªv", ipa2:"É™bËˆdÊ’ektÉªv" },
    { word:"priorities", lang:"EN", ipa:"praÉªËˆÉ”ËrÉªtiz", ipa2:"praÉªËˆÉ’rÉªtÉªz" },
    { word:"thoroughly", lang:"EN", ipa:"ËˆÎ¸ÊŒrÉ™li", ipa2:"ËˆÎ¸ÊŒrÉ™li" },
    { word:"hierarchy", lang:"EN", ipa:"ËˆhaÉªÉ™ËŒrÉ‘Ërki", ipa2:"ËˆhaÉªÉ™ËŒrÉ‘Ërki" },
    { word:"measure", lang:"EN", ipa:"ËˆmeÊ’É™r", ipa2:"ËˆmeÊ’É™r" },
    { word:"revenue", lang:"EN", ipa:"ËˆrÉ›vÉ™ËŒnjuË", ipa2:"ËˆrÉ›vÉ™ËŒnjuË" },
    { word:"discount", lang:"EN", ipa:"ËˆdÉªskaÊŠnt", ipa2:"ËˆdÉªskaÊŠnt" }
];

let currentLanguage = "EN";
let filteredWords = [];
let currentIndex = 0;
let selectedDialect = "1";

const elements = {
    word: document.getElementById('currentWord'),
    phonetic: document.getElementById('phoneticTranscription'),
    btnPlay: document.getElementById('playAudioButton'),
    btnNext: document.getElementById('nextButton'),
    btnPrev: document.getElementById('prevButton'),
    btnEng: document.getElementById('englishSectionButton'),
    btnEsp: document.getElementById('spanishSectionButton'),
    context: document.getElementById('contextInfo')
};

const flashcardElement = document.querySelector('.flashcard');

function init() {
    filteredWords = ALL_WORDS_DATA.slice();
    updateSection("EN","1",false);
    setupEventListeners();
}

function updateSection(lang, dialect, shouldScroll=true){
    currentLanguage=lang;
    selectedDialect=dialect;
    filteredWords = lang==="EN"?ALL_WORDS_DATA.slice():[];
    currentIndex=0;
    document.body.className=lang==="EN"?"english":"spanish";
    elements.btnEng.classList.toggle('active',lang==="EN");
    elements.btnEsp.classList.toggle('active',lang==="ES");
    closeAllMenus();
    displayWord(currentIndex);
    if(shouldScroll && flashcardElement) flashcardElement.scrollIntoView({behavior:'smooth',block:'start'});
}

function displayWord(index){
    if(!filteredWords.length){
        elements.word.textContent="No words";
        elements.phonetic.textContent="";
        elements.context.textContent="";
        return;
    }
    const data=filteredWords[index];
    elements.word.style.opacity=0;
    setTimeout(()=>{
        elements.word.textContent=data.word;
        const showSecondIPA = currentLanguage==="EN" && selectedDialect==="2" && data.ipa2;
        elements.phonetic.textContent = showSecondIPA?data.ipa2:data.ipa;
        elements.phonetic.style.color = currentLanguage==="EN"?"#F8AC10":"white";
        elements.phonetic.style.textShadow=currentLanguage==="EN"?"none":"2px 2px 4px rgba(0,0,0,0.7)";
        elements.word.style.opacity=1;
        const langName=currentLanguage==="EN"?"English":"EspaÃ±ol";
        const dialectName=currentLanguage==="EN"?(selectedDialect==="1"?"Gen. Am.":"UK-RP"):(selectedDialect==="1"?"Castilian":"Lat. Am.");
        elements.context.textContent=langName+" | "+dialectName;
    },150);
}

// Zmodyfikowana funkcja playAudio z dodatkowym oczyszczeniem tekstu (trim)
function playAudio(){
    if(!filteredWords.length) return;
    
    // UÅ¼ywamy tekstu z elementu DOM, aby uniknÄ…Ä‡ problemÃ³w z tablicÄ… danych
    const currentWordText = elements.word.textContent;
    
    // Dodatkowo usuwamy wszelkie niewidzialne biaÅ‚e znaki z poczÄ…tku/koÅ„ca sÅ‚owa
    const cleanedWord = currentWordText.trim(); 

    if (cleanedWord === "Loading..." || cleanedWord === "No words") {
        return; // Zabezpieczenie przed prÃ³bÄ… odtworzenia sÅ‚Ã³w w trakcie Å‚adowania
    }
    
    // Budowanie Å›cieÅ¼ki
    const path = `audio/${cleanedWord.toLowerCase()}.mp3`;
    
    const audio = new Audio(path);
    audio.play().catch(err=>{
        // JeÅ›li bÅ‚Ä…d nadal wystÄ™puje, prawie na pewno problem jest z plikiem:
        // - Uszkodzony plik MP3 (nie jest poprawnym formatem)
        // - Niewidoczne spacje/znaki w nazwie pliku na serwerze
        console.warn("BÅ‚Ä…d odtwarzania audio dla:", cleanedWord, ". Prawdopodobnie problem z plikiem na serwerze:", path);
    });
}

function nextWord(){if(filteredWords.length){currentIndex=(currentIndex+1)%filteredWords.length;displayWord(currentIndex);}}
function prevWord(){if(filteredWords.length){currentIndex=(currentIndex-1+filteredWords.length)%filteredWords.length;displayWord(currentIndex);}}

function toggleMenu(menuId,event){event.stopPropagation();const menu=document.getElementById(menuId);const isVisible=menu.classList.contains('show');closeAllMenus();if(!isVisible) menu.classList.add('show');}
function closeAllMenus(){document.querySelectorAll('.dialect-menu').forEach(el=>el.classList.remove('show'));}

function setupEventListeners(){
    elements.btnEng.onclick=(e)=>toggleMenu('englishMenu',e);
    elements.btnEsp.onclick=(e)=>toggleMenu('spanishMenu',e);
    elements.btnNext.onclick=nextWord;
    elements.btnPrev.onclick=prevWord;
    elements.btnPlay.onclick=playAudio;
    document.querySelectorAll('#englishMenu button').forEach(btn=>btn.onclick=()=>updateSection("EN",btn.dataset.dialect,true));
    document.querySelectorAll('#spanishMenu button').forEach(btn=>btn.onclick=()=>updateSection("ES",btn.dataset.dialect,true));
    window.onclick=()=>closeAllMenus();
    document.addEventListener('keydown',e=>{
        if(e.code==='Space'||e.key===' '){ e.preventDefault(); playAudio(); }
        if(e.key==='ArrowRight') nextWord();
        if(e.key==='ArrowLeft') prevWord();
    });
}

init();
</script>
</body>
</html>